{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    {% block csrf_block %}
    {% endblock %}
    <meta name="description" content="" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <link rel="stylesheet" type="text/css" href="{% static 'user_verse/dashboard.css'%}">
    <link id="theme-style" href="{% static 'user_verse/dark-theme.css'%}" rel="stylesheet">
    {% block css %}
    {% endblock %}
    
    <title>{% block title %}{% endblock %}</title>
  </head>

  <body>
    <div class="container-fluid">
      <div class="row h-100">
        <div class="col-1 p-0">
          <div class="sidebar d-flex flex-column flex-shrink-0 p-3 text-bg-dark" style="width: 280px; height: 100vh;">
            <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
              <svg class="bi pe-none me-2" width="40" height="32"><use xlink:href="#bootstrap"></use></svg>
              <span class="fs-4">VERSE</span>
            </a>
            <hr>
            <ul class="nav nav-pills flex-column mb-auto">
              <li class="sidebar-item nav-item">
                <a href="{% url 'dashboard-channels' %}" class="nav-link text-white" data-id="channel" aria-current="page">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-layout-list"><rect width="7" height="7" x="3" y="3" rx="1"/><rect width="7" height="7" x="3" y="14" rx="1"/><path d="M14 4h7"/><path d="M14 9h7"/><path d="M14 15h7"/><path d="M14 20h7"/></svg>
                  <span class="p-2 pt-2">Channels</span>
                </a>
              </li>
              <li class="sidebar-item">
                <a href="{% url 'dashboard-blogs' %}" class="nav-link text-white" data-id="blog" aria-current="page">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-user"><path d="M15 13a3 3 0 1 0-6 0"/><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"/><circle cx="12" cy="8" r="2"/></svg>
                  <span class="p-2 pt-2">Blog</span>
                </a>
              </li>
              <li class="sidebar-item">
                <a href="#" class="nav-link text-white">
                  <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#table"></use></svg>
                  <span class="p-2 pt-2">Orders</span>
                </a>
              </li>
              <li class="sidebar-item">
                <a href="#" class="nav-link text-white">
                  <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#grid"></use></svg>
                  <span class="p-2 pt-2">Products</span>
                </a>
              </li>
              <li class="sidebar-item">
                <a href="#" class="nav-link text-white">
                  <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#people-circle"></use></svg>
                  <span class="p-2 pt-2">Customers</span>
                </a>
              </li>
            </ul>
            <hr>
            <div class="dropdown">
              <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                <img src="https://github.com/mdo.png" alt="" width="32" height="32" class="rounded-circle me-2">
                <strong>mdo</strong>
              </a>
              <ul class="dropdown-menu dropdown-menu-dark text-small shadow">
                <li><a class="dropdown-item" href="#">New project...</a></li>
                <li><a class="dropdown-item" href="#">Settings</a></li>
                <li><a class="dropdown-item" href="#">Profile</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="#">Sign out</a></li>
              </ul>
            </div>
          </div>
        </div>
        {% block content %}
        {% endblock %}
      </div>
    </div>      

    
  
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    
    <script type="text/javascript">
      const lightThemeUrl = "{% static 'user_verse/light-theme.css' %}";
      const darkThemeUrl = "{% static 'user_verse/dark-theme.css' %}";
    </script>

    <script>
      $(document).ready(function() {
        // Retrieve the active link from local storage on page load
        const activeLink = localStorage.getItem('activeNavLink');
        if (activeLink) {
            $(`.nav-link[data-id="${activeLink}"]`).addClass('active');
        }

        // Event handler for nav-link clicks
        $('.nav-link').on('click', function(e) {
            // Remove active class from all links
            $('.nav-link').removeClass('active');

            // Add active class to the clicked link
            $(this).addClass('active');

            // Store the clicked link's identifier in local storage
            const linkId = $(this).data('id');
            localStorage.setItem('activeNavLink', linkId);
        });

        // Reset active link to "Channels" when user leaves the site
        $(window).on('beforeunload', function() {
          $('.nav-link').removeClass('active');
        });
      });

    </script>
    <script src="{% static 'toggle.js' %}"></script>
    
    {% block js %}
    {% endblock %}
  </body>
</html>
